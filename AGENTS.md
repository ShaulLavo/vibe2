# ü¶ç GORILLA MODE: ENABLED

# üöÄ VELOCITY IS KING

# üö¨ PUSH TO MASTER (CURRENT BRANCH)

---

## ü¶ç CORE PHILOSOPHY

### üìÅ EVERYTHING IS FILE

WE EMBRACE "EVERYTHING IS A FILE".
INSPIRED BY UNIX. PLAN 9. INFERNO.

- **UNIFIED INTERFACE**: RESOURCES, STATES, PROCESS DATA = FILES.
- **EXPLORABLE SURFACE**: SETTINGS = JSON. FONT PREVIEWS = VIRTUAL FILES.
- **CONSISTENCY**: ONE WAY TO ACCESS EVERYTHING.

### ‚ö° GREENFIELD & PERFORMANCE

- **NEW JUNGLE**: STRICTLY GREENFIELD. NO LEGACY VINES.
- **NO BACKWARD COMPAT**: BETTER WAY? TAKE IT. NO "BREAKING CHANGES". ONLY IMPROVEMENTS.
- **PERFORMANCE**: CLEANEST, FASTEST CODE AT ALL COSTS.
- **REFACTOR**: AGGRESSIVE. MAINTAIN VELOCITY. MAINTAIN QUALITY.

---

## üå¥ PROJECT STRUCTURE

**BUN + TURBO MONOREPO**.

### ü¶ç APPLICATIONS (`apps/`)

- **`web`**: MAIN CLIENT. SOLIDJS + VITE + TAILWIND V4 + NUQS. WINDOW MANAGER. VIRTUAL FS. INTEGRATED TERMINAL/EDITOR.
- **`server`**: BACKEND API. BUN + ELYSIA. FONT FETCHING. GIT PROXY. STATIC ASSETS. EDEN TREATY FOR TYPE-SAFETY.
- **`desktop`**: DESKTOP SHELL. TAURI + RUST.

### üçå SHARED PACKAGES (`packages/`)

- **`@repo/fs`**: HEART OF SYSTEM. VIRTUAL FILESYSTEM. LOCAL, OPFS, MEMORY BACKENDS (`createFs`, `buildFsTree`, `VFile`, `VDir`).
- **`@repo/code-editor`**: HIGH-PERFORMANCE EDITOR. SOLIDJS. PIECE-TABLE SNAPSHOTS. VIRTUALIZATION. DECORATIONS.
- **`@repo/ui`**: HEADLESS UI PRIMITIVES. DESIGN SYSTEM COMPONENTS.
- **`@repo/settings`**: ZOD SCHEMAS & TYPES FOR JSON-BASED SETTINGS.
- **`@repo/utils`**: LOW-LEVEL HELPERS. BINARY/TEXT HEURISTICS. PIECE-TABLES.
- **`@repo/perf`**: TRACING. PERFORMANCE MONITORING UTILITIES.
- **`@repo/logger`**: SCOPED LOGGING. CONSISTENT DEBUG OUTPUT.
- **`@repo/icons`**: SOLID WRAPPERS FOR VECTOR ICONS.
- **`@repo/keyboard`**: KEY BINDING MANAGEMENT. SHORTCUT HANDLING.
- **`@repo/theme`**: DESIGN TOKENS. THEME CONFIGURATION.
- **`@repo/eslint-config`** / **`@repo/typescript-config`**: SHARED CONFIGURATION.

### üêí EXTERNAL & FORKED PACKAGES

- **`ghostty-web`**: WASM-COMPILED GHOSTTY TERMINAL EMULATOR.
- **`sqlite-wasm`**: ES MODULE WRAPPER FOR SQLITE.
- **`just-bash`**: IN-BROWSER BASH ENVIRONMENT SIMULATION.
- **`nuqs-solid`**: URL STATE MANAGEMENT ADAPTER FOR SOLIDJS.
- **`vitest-browser-solid`**: ADAPTER FOR TESTING SOLID COMPONENTS IN VITEST BROWSER MODE.

---

## üî• DEVELOPMENT WORKFLOW

### üçå STRICTLY BUN

> **CRITICAL RULE**: YOU MUST USE `bun`.

- **INSTALL**: `bun install`
- **RUN SCRIPTS**: `bun run <script>`
- **EXECUTE TOOLS**: `bun run x <tool>` (E.G. `bun run x eslint`)
- **NEVER USE NON-BUN**: `npx` IS BANNED.
- **DEBUG**: IF `bun` IS BUGGED, TRY `~/.bun/bin/bun`.

### üîç DEBUGGING

- **CONSOLE LOGS**: USE `console.log` FOR DEVELOPMENT.
- **FORMAT**: **ALWAYS** WRAP COMPLEX DATA IN `JSON.stringify(data, null, 2)`. READABLE.
- **PRODUCTION**: USE `@repo/logger`. NO `console.log` IN PROD.

### üß™ TESTING

- **UNIT**: VITEST (`*.test.ts`, `*.test.tsx`).
- **BROWSER**: PLAYWRIGHT VIA VITEST BROWSER MODE (`@vitest/browser-playwright`).
- **RULE**: FAST. DETERMINISTIC. **NEVER** USE AI BROWSER COMPONENT FOR TESTING UNLESS EXPLICITLY INSTRUCTED.

---

## ü¶æ CODING STANDARDS

### üìù TYPESCRIPT

- **STRICT TYPING**: NO `any`. USE `unknown`, GENERICS, OR PROPER TYPES.
- **NO ENUMS**: AVOID STANDARD `enum`. USE `const enum` OR `as const` OBJECTS.

### ‚ö° SOLIDJS

- **REACTIVITY**: **NEVER** DESTRUCTURE `props`. KILLS REACTIVITY. USE `splitProps` OR ACCESS `props.property`.
- **GETTERS**: PROPS ARE REACTIVE GETTERS. NO WRAPPING `props.value` IN FUNCTION IF ALREADY SIGNAL.
- **STATE**: USE `batch(() => ...)` FOR SIMULTANEOUS UPDATES.
- **COMPONENTS**: ONE COMPONENT PER FILE. **NO LOGIC INSIDE**.
  - **PURE LOGIC**: GOES IN `utils`.
  - **STATEFUL LOGIC**: GOES IN HOOKS (`create*` / `use*`).

### üé® STYLING

- **ENGINE**: TAILWIND CSS V4.
- **THEME**: DEFINED IN `apps/web/src/styles.css` USING `@theme`.
- **ANIMATIONS**: STANDARD CSS CLASSES OR `@apply`.

### üó£Ô∏è COMMENTS

- **MINIMALISM**: AVOID COMMENTS. CODE EXPLAINS ITSELF.
- **EXCEPTION**: ONLY FOR _WHY_, NOT _WHAT_. IMPORTANT CONTEXT ONLY.

### üß± COMPLEXITY LIMIT ("NEVER NESTER")

- **MAX DEPTH**: 3 LEVELS.
- **DESCRIPTIVE VARIABLES**: COMPLEX CALCULATIONS? EXTRACT TO VARIABLE WITH DESCRIPTIVE NAME.
- **REFACTOR**: EXTRACT LOGIC. SMALL, FOCUSED FUNCTIONS.
- **GUARD CLAUSES**: RETURN EARLY. NO `else` BLOCKS.

---

## üõ†Ô∏è IMPLEMENTATION DETAILS

- **SETTINGS**: JSON-FIRST. UI REFLECTS JSON FILE STATE. SCHEMA IN `apps/web/src/settings`.
- **VIRTUAL FS**: MUTATE VIA `FsProvider` ACTIONS. ENSURES CACHE CONSISTENCY & STATS.
- **ENVIRONMENT**: ZOD VALIDATORS (`env.ts`) FOR ALL ENV VARIABLES.
- **GIT**: DEDICATED WORKER (`git.worker.ts`). KEEP MAIN THREAD FREE.

---

## üì¶ COMMIT GUIDELINES

- **CONVENTION**: [CONVENTIONAL COMMITS](https://www.conventionalcommits.org/).
- **GRANULARITY**: ATOMIC. FOCUSED. GROUP RELATED CHANGES.
- **DESCRIPTION**: SHORT TITLE. DETAILED DESCRIPTION IF NEEDED.

---

# ü¶çüçåüö¨ GORILLA STRONG. CODE FAST. PUSH. ü¶çüçåüö¨
